@extends('layouts.dashboard')

@section('content')
    <div class="container">
        @if(session('status'))
            <span class="alert alert-success d-inline-block mt-3">
                {{ session('status') }}
            </span>
        @endif
    	<div class="row mt-3">
    		<div class="col-md-4 mb-3 mb-md-0">
    			<div class="card border-0 shadow rounded-lg p-3 bg-success">
    				<div class="d-flex balance">
    					<div class="mr-3 d-flex align-items-center">
    						<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="M336 336c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm-136-10c-5.516 0-10-4.484-10-10s4.484-10 10-10c3.543 0 7.281 1.809 10.816 5.227 3.97 3.84 10.301 3.738 14.141-.235 3.84-3.969 3.734-10.297-.234-14.137-5.075-4.914-10.153-7.69-14.723-9.207V276c0-5.523-4.477-10-10-10s-10 4.477-10 10v11.719c-11.64 4.129-20 15.246-20 28.281 0 16.543 13.457 30 30 30 5.512 0 10 4.484 10 10s-4.488 10-10 10c-4.273 0-8.887-2.688-12.988-7.566-3.551-4.227-9.86-4.774-14.086-1.22-4.23 3.556-4.774 9.864-1.223 14.09 5.348 6.36 11.633 10.79 18.297 13.024V396c0 5.523 4.477 10 10 10s10-4.477 10-10v-11.719c11.637-4.129 20-15.246 20-28.281 0-16.543-13.457-30-30-30zm-80-160c5.523 0 10-4.477 10-10v-40c0-5.523-4.477-10-10-10s-10 4.477-10 10v40c0 5.523 4.477 10 10 10zm0 0"/><path d="M472 236v-80c0-27.57-22.43-50-50-50h-56V30c0-16.543-13.457-30-30-30H150c-16.543 0-30 13.457-30 30v36H90c-16.543 0-30 13.457-30 30v10H50c-27.57 0-50 22.43-50 50v306c0 27.57 22.43 50 50 50h306c24.145 0 44.348-17.203 48.992-40H422c27.57 0 50-22.43 50-50v-26h10c16.543 0 30-13.457 30-30v-90c0-22.055-17.945-40-40-40zm20 40c0 11.047-8.953 20-20 20v-40c11.027 0 20 8.973 20 20zm-70-150c16.543 0 30 13.457 30 30v140h-46v-60c0-24.145-17.203-44.348-40-48.992V126zM140 30c0-5.516 4.484-10 10-10h186c5.516 0 10 4.484 10 10v156h-46V96c0-16.543-13.457-30-30-30H140zm100 156V86h30c5.516 0 10 4.484 10 10v90zm-60 0V86h40v100zM80 96c0-5.516 4.484-10 10-10h70v100H80zm-30 30h10v60h-7.86C35.614 186 20 174.031 20 156c0-16.543 13.457-30 30-30zm306 366H50c-16.543 0-30-13.457-30-30V195.383C28.941 202.043 40.172 206 52.14 206H356c16.543 0 30 13.457 30 30v60h-70c-16.543 0-30 13.457-30 30v40c0 16.543 13.457 30 30 30h70v66c0 16.543-13.457 30-30 30zm96-70c0 16.543-13.457 30-30 30h-16v-56h46zm30-46H316c-5.516 0-10-4.484-10-10v-40c0-5.516 4.484-10 10-10h156c7.137 0 13.984-1.867 20-5.355V366c0 5.516-4.484 10-10 10zm0 0"/><path d="M422 336h-46c-5.523 0-10 4.477-10 10s4.477 10 10 10h46c5.523 0 10-4.477 10-10s-4.477-10-10-10zm0 0"/></svg>
    					</div>
    					<div>
	    					<p class="text-white mb-0"><strong>Wallet Balance</strong></p>
	    					<h1 class="display-5">₦ {{ $user->balanceFloat }}</h1>
    					</div>
    				</div>
    				<a class="btn btn-light" href="{{ route('withdrawal.create') }}">Withdraw</a>
    			</div>
    		</div>
    		<div class="col-md-4">
    			<div class="card border-0 shadow rounded-lg p-3 bg-success">
    				<div class="d-flex balance">
    					<div class="mr-3 d-flex align-items-center">
    						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 469.824 469.824"><path d="M188.885 67.36C147.84 26.336 67.52 21.579 10.667 21.579 4.779 21.579 0 26.357 0 32.245c0 56.853 4.736 137.173 45.781 178.219 17.323 17.323 43.883 25.067 70.208 25.067 28.608 0 56.96-9.152 72.896-25.088 30.571-30.571 36.182-106.923 0-143.083zm-15.082 128.021c-22.827 22.805-86.208 26.709-112.917 0-33.131-33.13-38.87-100.437-39.489-152.405 51.968.619 119.275 6.357 152.405 39.488 26.71 26.709 22.806 90.112.001 112.917zM459.157 63.776c-56.853 0-137.173 4.736-178.219 45.781-36.181 36.16-30.571 112.512 0 143.083 15.936 15.915 44.267 25.067 72.875 25.067 26.325 0 52.864-7.723 70.229-25.045 41.024-41.045 45.781-121.365 45.781-178.219.001-5.888-4.778-10.667-10.666-10.667zm-50.24 173.781c-26.709 26.709-90.112 22.805-112.917 0-22.805-22.805-26.709-86.208 0-112.917 33.131-33.131 100.437-38.869 152.405-39.488-.618 51.989-6.357 119.296-39.488 152.405z"/><path d="M382.123 156.107c-2.517-5.355-9.728-7.189-15.04-4.715-81.813 38.464-122.005 105.536-140.267 174.485-22.592-146.603-87.936-191.296-115.648-210.261-3.456-2.368-6.144-4.096-7.637-5.568-4.16-4.16-10.923-4.16-15.083 0s-4.16 10.923 0 15.083c2.112 2.091 5.76 4.715 10.688 8.085 31.232 21.355 114.197 78.123 114.197 304.363 0 5.888 4.779 10.667 10.667 10.667s10.667-4.779 10.667-10.645c0-91.413 24.555-211.925 141.504-266.88 0-.021 1.728-.832 1.728-.832 5.312-2.518 6.741-8.449 4.224-13.782z"/></svg>
    					</div>
    					<div>
	    					<p class="text-white mb-0"><strong>Sponsored Projects</strong></p>
	    					<h1 class="display-5">{{ $user->investments_count }}</h1>
    					</div>
    				</div>
                    <div class="d-flex">
        				<a class="btn btn-light mr-3" href="{{ route('projects.index') }}">Sponsor</a>
                        <a class="btn btn-light" href="{{ route('investments.index') }}">View</a>
                    </div>
    			</div>
    		</div>
    	</div>
    	<div class="col-md-8 mt-3 px-0">
    		<div class="card border-0 shadow rounded-lg p-3">
    			<p class="mb-0"><strong>Wallet Transaction History</strong></p>
    			<hr>
    			<div class="text-muted">
    				@if(count($user->transactions))
	    				<table class="table table-striped">
	    				  <thead>
	    				    <tr>
	    				      <th scope="col">#</th>
	    				      <th scope="col">Transaction Type</th>
	    				      <th scope="col">Amount</th>
	    				      <th scope="col"></th>
	    				    </tr>
	    				  </thead>
	    				  <tbody>
	    				    @foreach($user->transactions as $transaction)
	    				    	<tr>
	    				    	  <th scope="row">1</th>
	    				    	  <td>{{ ucfirst($transaction->type) }}</td>
	    				    	  <td>₦{{ $transaction->amount / 100 }}</td>
	    				    	  <td>{{ $transaction->created_at->diffForHumans() }}</td>
	    				    	</tr>
	    				    @endforeach
	    				  </tbody>
	    				</table>
    				@else
    					<p class="text-center my-5 ">No transactions history</p>
    				@endif
    			</div>	
    		</div>
    	</div>
    </div>
@endsection
